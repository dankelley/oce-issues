# Implementation of more RSK features

## Sample files:

* `065583_20150516_1717.rsk`: Vanilla titanium CTD, keller thermistor

* `080284_20151106_1625.rsk`: Maestro in flow-through chamber, CTD+O2+Fl+pH

* `957739_20150403_1611.rsk`: CTDTu, with thresholding

## 762a.R

Read all channels in an RSK, including "hidden" ones. Append numbers to channel names that are repeated (e.g. `temperature2`)

## 762b.R

Convert UTF-8 channel names to ASCII text. Also give dissolved oxygen channels the name `oxygen`.

## 762c.R

Implement `from` and `to` args for `read.rsk()`.

## 762d.R

Reading more of the "sampling" parameters, like:

* start/end times: `epochs$startTime` and `epochs$endTime`

* deployment configurations: `schedules$mode`, `schedules$gate`

* calibrations: `calibrations` table

* parameters: `parameters` table -- temperature, conductivity, pressure, salinity, atmosphere, density, simpleDepth, latitude, longitude, oxygenConcentration, speedOfSoundType


To get the "casts" as detected by the logger, I don't have to parse the events, as the cast information already seems to be put into 3 connected tables: `region`, `regionCast`, and `regionProfile`. For example the `region` table lists `PROFILES` and `CASTS`, like:

	datasetID regionID type tstamp1 tstamp2 label
    "1"	"1"	"PROFILE"	"1428088764000"	"1428089684000"	""
    "1"	"2"	"CAST"	"1428088764000"	"1428089494000"	""
    "1"	"3"	"CAST"	"1428089494000"	"1428089684000"	""
    "1"	"4"	"PROFILE"	"1428090414000"	"1428090664000"	""
    "1"	"5"	"CAST"	"1428090414000"	"1428090450000"	""
    "1"	"6"	"CAST"	"1428090450000"	"1428090664000"	""
    "1"	"7"	"PROFILE"	"1428091322000"	"1428091567000"	""
    "1"	"8"	"CAST"	"1428091322000"	"1428091354000"	""
    "1"	"9"	"CAST"	"1428091354000"	"1428091567000"	""

and the `regionCast` tables looks like:

	regionID regionProfileID type
	"2"	"1"	"DOWN"
    "3"	"1"	"UP"
    "5"	"4"	"DOWN"
    "6"	"4"	"UP"
    "8"	"7"	"DOWN"
    "9"	"7"	"UP"

Note that the `regionID` column corresponds to the row number in the `region` table, so to read down vs upcasts I should search `regionID$type` for DOWN or UP, and then extract the times from `region$tstamp1` and `tstamp2` and subset based on those.

One issue with this is that the three `region*` tables are auto generated by Ruskin when the file is opened, so files from old versions of Ruskin (<= 1.12.1) definitely do not have this. In such cases I would have to do it manually using the raw `events` table (as is done in RSKtools).
